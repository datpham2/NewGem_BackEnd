{"openapi":"3.0.1","info":{"title":"API Service","description":"API documents","license":{"name":"Apache 2.0","url":"https://springdoc.org"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"User","description":"Operations related to users"},{"name":"Auth","description":"Operation related to security and authentication"}],"paths":{"/user/updateUser/{id}":{"put":{"tags":["User"],"summary":"Update user","description":"Send a request via this API to update user","operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/room/updateRoom/{id}":{"put":{"tags":["room-controller"],"operationId":"updateRoom","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/hotel/updateHotel/{id}":{"put":{"tags":["hotel-controller"],"operationId":"updateHotel","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HotelDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/voucher/update/{id}":{"post":{"tags":["voucher-controller"],"operationId":"updateVoucher","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoucherDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/voucher/createVoucher/{hotelId}":{"post":{"tags":["voucher-controller"],"operationId":"createReview","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoucherDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/user/addUser":{"post":{"tags":["User"],"summary":"Add new user","description":"Send a request via this API to create a new user then go to your email to activate the account","operationId":"addUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/room/createRoom":{"post":{"tags":["room-controller"],"operationId":"addRoom","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reviews/update/{id}":{"post":{"tags":["review-controller"],"operationId":"updateReview","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewsDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reviews/createReview":{"post":{"tags":["review-controller"],"operationId":"createReview_1","parameters":[{"name":"hotelId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"userId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewsDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reservation/bookRooms":{"post":{"tags":["reservation-controller"],"operationId":"makeReservations","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReservationDTO"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reservation/bookRoom":{"post":{"tags":["reservation-controller"],"operationId":"makeReservation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/hotel/createHotel":{"post":{"tags":["hotel-controller"],"operationId":"createHotel","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HotelDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/bill/payBill":{"post":{"tags":["bill-controller"],"operationId":"getBillById","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PayRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/bill/createBill":{"post":{"tags":["bill-controller"],"operationId":"getBillByUserId","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/auth/signin":{"post":{"tags":["Auth"],"summary":"Sign in","description":"Sign in to receive access token to use other operations and refresh token to get new access token after expiration","operationId":"signIn","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/auth/removetoken":{"post":{"tags":["Auth"],"summary":"Remove token for logout","description":"Post the access token in the header referer to remove the token from the db","operationId":"removeToken","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/auth/refreshtoken":{"post":{"tags":["Auth"],"summary":"Refresh token","description":"Post the refresh token in the header Referer to get a new access token","operationId":"refreshToken","parameters":[{"name":"Referer","in":"header","description":"JWT token","required":true}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/auth/forgotpassword":{"post":{"tags":["Auth"],"summary":"Reset token","description":"Post the username to receive the reset token to renew password","operationId":"forgotPassword","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/auth/changepassword":{"post":{"tags":["Auth"],"summary":"Change password","description":"Post the reset token as secretkey, new password and confirm password to change password","operationId":"changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/voucher/{id}":{"get":{"tags":["voucher-controller"],"operationId":"getAllVoucher","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}},"patch":{"tags":["voucher-controller"],"operationId":"disableVoucher","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/user/disableUser/{id}":{"patch":{"tags":["User"],"summary":"Disable user","description":"Send a request via this API to disable user","operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/user/changeStatus/{id}":{"patch":{"tags":["User"],"summary":"Change status of user","description":"Send a request via this API to change the status of the user","operationId":"updateUserStatus","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reviews/{id}":{"get":{"tags":["review-controller"],"operationId":"hotelDetail","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}},"patch":{"tags":["review-controller"],"operationId":"disableReview","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/hotel/delete/{id}":{"patch":{"tags":["hotel-controller"],"operationId":"disableHotel","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/user/getUser/{id}":{"get":{"tags":["User"],"summary":"Get the user by id","description":"Send a request via this API to get the user with path variable id","operationId":"getUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/user/getAllUser":{"get":{"tags":["User"],"summary":"Get all users","description":"Send a request via this API to retrieve all users","operationId":"getAllUser","parameters":[{"name":"page","in":"query","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"minimum":1,"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/user/confirm/{userId}":{"get":{"tags":["User"],"summary":"Confirm user","description":"Send a request via this API to confirm user","operationId":"confirm","parameters":[{"name":"userId","in":"path","required":true,"schema":{"minimum":1,"type":"integer","format":"int64"}},{"name":"verifyCode","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/room/{id}":{"get":{"tags":["room-controller"],"operationId":"getRoomById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/room/allRoom/{hotelId}":{"get":{"tags":["room-controller"],"operationId":"getAllRoomByHotelId","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"minimum":1,"type":"integer","format":"int32","default":8}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reservation/{id}":{"get":{"tags":["reservation-controller"],"operationId":"getReservationById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reservation/allUsers/{userId}":{"get":{"tags":["reservation-controller"],"operationId":"getAllRoomByUserId","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"minimum":1,"type":"integer","format":"int32","default":8}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reservation/allRooms/{roomId}":{"get":{"tags":["reservation-controller"],"operationId":"getAllRoomByRoomId","parameters":[{"name":"roomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"minimum":1,"type":"integer","format":"int32","default":8}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/hotel/{id}":{"get":{"tags":["hotel-controller"],"operationId":"getHotelDetail","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/hotel/searchHotelByName":{"get":{"tags":["hotel-controller"],"operationId":"searchByNameHotel","parameters":[{"name":"name","in":"query","required":false,"schema":{"type":"string","default":"%"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":8}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/hotel/allHotel":{"get":{"tags":["hotel-controller"],"operationId":"getAllHotel","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":8}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/home":{"get":{"tags":["home-controller"],"operationId":"homePage","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/bill/getBill/{billId}":{"get":{"tags":["bill-controller"],"operationId":"getBillId","parameters":[{"name":"billId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/bill/getAllBill":{"get":{"tags":["bill-controller"],"operationId":"getAllBillByUserId","parameters":[{"name":"user","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"hotel","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reservation/cancels":{"delete":{"tags":["reservation-controller"],"operationId":"cancelReservations","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/reservation/cancel/{id}":{"delete":{"tags":["reservation-controller"],"operationId":"cancelReservation","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}}},"components":{"schemas":{"UserDTO":{"required":["firstName","lastName","password","username"],"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"dateOfBirth":{"type":"string","format":"date"},"gender":{"type":"string","enum":["MALE","FEMALE","OTHER"]},"username":{"type":"string"},"password":{"maxLength":2147483647,"minLength":8,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$","type":"string"}}},"ApiResponse":{"type":"object","properties":{"status":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object"}}},"RoomDTO":{"required":["price","roomNumber","type"],"type":"object","properties":{"roomId":{"type":"integer","format":"int64"},"hotelId":{"type":"integer","format":"int64"},"roomNumber":{"type":"integer","format":"int32"},"price":{"minimum":0.0,"exclusiveMinimum":false,"type":"number","format":"double"},"type":{"type":"string","enum":["SINGLE","DOUBLE","VIP"]},"guests":{"type":"integer","format":"int32"}}},"HotelDTO":{"required":["location","name"],"type":"object","properties":{"name":{"type":"string"},"location":{"type":"string"},"rating":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["ACTIVE","INACTIVE"]},"min_price":{"minimum":1,"type":"number"},"max_price":{"minimum":1,"type":"number"},"no_rooms":{"minimum":1,"type":"integer","format":"int32"}}},"VoucherDTO":{"type":"object","properties":{"discount":{"minimum":1,"type":"integer","format":"int32"},"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"},"status":{"type":"string","enum":["ACTIVE","INACTIVE"]},"hotel_id":{"type":"integer","format":"int64"}}},"ReviewsDTO":{"required":["comment"],"type":"object","properties":{"comment":{"type":"string"},"rating":{"maximum":5,"minimum":1,"type":"integer","format":"int32"},"status":{"type":"string","enum":["ACTIVE","INACTIVE"]},"user_id":{"type":"integer","format":"int64"},"hotel_id":{"type":"integer","format":"int64"}}},"ReservationDTO":{"required":["hotelId"],"type":"object","properties":{"reservationId":{"type":"integer","format":"int64"},"checkIn":{"type":"string","format":"date"},"checkOut":{"type":"string","format":"date"},"hotelId":{"type":"integer","format":"int64"},"roomId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"adults":{"type":"integer","format":"int32"},"children":{"type":"integer","format":"int32"},"billId":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["ACTIVE","INACTIVE"]}}},"PayRequest":{"type":"object","properties":{"billId":{"type":"integer","format":"int64"},"receivedAmount":{"minimum":0.0,"exclusiveMinimum":false,"type":"number"},"newFee":{"type":"number"},"descriptions":{"type":"array","items":{"type":"string"}}}},"BillRequest":{"required":["checkOut","hotelId","userId"],"type":"object","properties":{"hotelId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"checkOut":{"type":"string","format":"date"},"voucherId":{"type":"integer","format":"int64"}}},"SignInRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"TokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"userId":{"type":"integer","format":"int64"}}},"ResetPasswordRequest":{"required":["confirmPassword","password","resetKey"],"type":"object","properties":{"resetKey":{"type":"string"},"password":{"maxLength":2147483647,"minLength":8,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$","type":"string"},"confirmPassword":{"maxLength":2147483647,"minLength":8,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$","type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}